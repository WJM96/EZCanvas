class EZCanvas{constructor(settings={},canvasElement="#ezcanvas"){"string"==typeof canvasElement&&("#"!==canvasElement[0]&&(canvasElement="#"+canvasElement),canvasElement=document.querySelector(canvasElement));try{this.canvasElement=canvasElement,this.ctx=canvasElement.getContext("2d")}catch(error){console.log(`EZCanvas couldn't find the specified element, or it was not a canvas. ERR: ${error}`)}this.settings={brush:{ends:"round",joins:"round",size:5,color:"#000000"},stabilizer:{enabled:!0,delay:.3},clearColor:"#FFFFFF"};for(const key in this.settings)settings.hasOwnProperty(key)&&("object"==typeof this.settings[key]?Object.assign(this.settings[key],settings[key]):this.settings[key]=settings[key]);this.applySettings(),this.currentPos=[0,0],this.stabilizedPos=[0,0],this.canvasElement.onpointermove=this.handlePointerMove.bind(this),this.canvasElement.onpointerdown=this.startLine.bind(this),this.canvasElement.onpointerup=this.endLine.bind(this),this.running=!1}applySettings(){return this.ctx.lineWidth=this.settings.brush.size,this.ctx.lineCap=this.settings.brush.ends,this.ctx.lineJoin=this.settings.brush.joins,this.ctx.strokeStyle=this.settings.brush.color,this}setBrushColor(color="#000000"){return this.settings.brush.color=color,this.ctx.strokeStyle=color,this}setBrushSize(size=5){return this.settings.brush.size=size,this.ctx.lineWidth=size,this}clear(color="transparent"){return"transparent"===color?this.ctx.clearRect(0,0,this.canvasElement.width,this.canvasElement.height):(this.ctx.save(),this.ctx.fillStyle=color||this.settings.clearColor,this.ctx.fillRect(0,0,this.canvasElement.width,this.canvasElement.height),this.ctx.restore()),this}drawImage(url){const img=document.createElement("IMG");return img.onload=(()=>{this.ctx.drawImage(img,0,0,this.canvasElement.width,this.canvasElement.height)}),img.src=url,this}updatePointerPos(event){const offset=this.canvasElement.getBoundingClientRect();this.currentPos=[event.clientX-offset.left,event.clientY-offset.top]}handlePointerMove(event){this.updatePointerPos(event),this.running&&this.draw()}startLine(){this.running=!0,this.stabilizedPos=this.currentPos,this.ctx.moveTo(...this.currentPos),this.ctx.beginPath()}endLine(){this.running=!1,this.settings.stabilizer.enabled&&(this.ctx.lineTo(...this.currentPos),this.ctx.stroke())}draw(){if(this.ctx.beginPath(),this.settings.stabilizer.enabled){this.ctx.moveTo(...this.stabilizedPos);const diff=[this.currentPos[0]-this.stabilizedPos[0],this.currentPos[1]-this.stabilizedPos[1]];this.stabilizedPos[0]+=diff[0]*this.settings.stabilizer.delay,this.stabilizedPos[1]+=diff[1]*this.settings.stabilizer.delay,this.ctx.lineTo(...this.stabilizedPos)}else this.ctx.lineTo(...this.currentPos),this.ctx.moveTo(...this.currentPos);this.ctx.stroke()}}var e;document.addEventListener("DOMContentLoaded",()=>{e=new EZCanvas});